(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4144],{5087:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workspace/[workspaceId]",function(){return t(44540)}])},13032:function(n,e,t){"use strict";var r=t(52322),i=t(33337),o=t(14898),u=t(17366);e.Z=function(n){var e=n.hideSplashOnLoad,t=void 0===e||e,a=n.children,s=(0,o.fC)();return(0,u.Z)((function(){s&&t&&(0,i.hf)()}),[s,t]),s?(0,r.jsx)(r.Fragment,{children:a}):null}},43258:function(n,e,t){"use strict";var r=t(25237),i=t.n(r),o=t(45217);window.hljs=o.ZP,e.Z=i()((function(){return Promise.all([t.e(9774),t.e(3484),t.e(1131),t.e(7643),t.e(4526),t.e(5060),t.e(1498),t.e(3134),t.e(4941),t.e(5713),t.e(9806),t.e(2845),t.e(1925),t.e(1023),t.e(2199),t.e(8602),t.e(5940),t.e(3165),t.e(4966),t.e(427),t.e(4900),t.e(1374),t.e(9689),t.e(1180),t.e(6962),t.e(6228),t.e(6947),t.e(989),t.e(7223)]).then(t.bind(t,87398))}),{loadableGenerated:{webpack:function(){return[87398]}},ssr:!1})},30096:function(n,e,t){"use strict";var r=t(2784),i=t(6673);e.Z=function(){(0,r.useEffect)((function(){return i.Z.init(),function(){return i.Z.dispose()}}),[])}},26138:function(n,e,t){"use strict";var r=t(52322),i=(0,t(2784).memo)((function(){return(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n      body {\n        overflow: hidden;\n      }\n    "}})}));i.displayName="WorkspaceBodyStyles",e.Z=i},29639:function(n,e,t){"use strict";var r=t(52322),i=t(69212),o=t(33337),u=t(41573),a=t(17366);e.Z=function(n){var e,t=n.hideSplashOnLoad,s=void 0===t||t,c=n.isEmbedIntegration,d=void 0!==c&&c,l=n.children,f=(0,u.Rx)(),v=(0,u.vP)(),p=(null!==(e=(0,u.sx)())&&void 0!==e?e:{}).hasAccess;return(0,a.Z)((function(){f&&s&&(0,o.hf)()}),[f,s]),f?p?v?(0,r.jsx)(r.Fragment,{children:l}):(0,r.jsx)(i.Z,{statusCode:404,hideActionButtons:d}):(0,r.jsx)(i.Z,{statusCode:403,hideActionButtons:d}):null}},90927:function(n,e,t){"use strict";var r=t(52322),i=t(97729),o=t.n(i),u=t(41573);e.Z=function(){var n=(0,u.u0)();return n?(0,r.jsx)(o(),{children:(0,r.jsxs)("title",{children:[n," \u2014 Eraser"]})}):null}},77084:function(n,e,t){"use strict";var r=t(25237),i=t.n(r);e.Z=i()((function(){return t.e(3379).then(t.bind(t,3379))}),{loadableGenerated:{webpack:function(){return[3379]}},ssr:!1})},84622:function(n,e,t){"use strict";t.d(e,{P:function(){return f},X:function(){return l}});var r=t(52322),i=t(2784),o=t(72236),u=t(83295),a=t(14898),s=t(32331),c=t(44883),d={dismiss:function(){},wasDismissed:function(){return!1}},l=(0,i.createContext)(d),f=function(n){var e,t=n.tutorialId,d=n.children,f=(0,i.useState)([]),v=f[0],p=f[1],h=(0,u.b)().activations,_=(0,a.aF)();(0,i.useEffect)((function(){var n;p((null===_||void 0===_||null===(n=_.userSettings)||void 0===n?void 0:n.dismissedHints)||[])}),[null===_||void 0===_||null===(e=_.userSettings)||void 0===e?void 0:e.dismissedHints]);var m=(0,i.useCallback)((function(n){return v.includes(n)}),[v]),g=(0,i.useCallback)((function(n){if(_&&n&&!m(n)){var e=v.concat(n);p(e),s.H.updateUserSettings(_.id,{dismissedHints:e})}}),[_,v,m]);return(0,i.useEffect)((function(){h[c.c.AddFigure]&&g(o.X.ORGANIZE_WITH_FIGURES),h[c.c.AddFigureEmbed]&&g(o.X.EMBED_FIGURE_IN_DOCUMENT),h[c.c.AddComment]&&g(o.X.LEAVE_COMMENT)}),[h,g]),(0,r.jsx)(l.Provider,{value:{activeTutorialId:t,dismiss:g,wasDismissed:m},children:d})}},94234:function(n,e,t){"use strict";t.d(e,{s:function(){return i}});var r=t(19605),i=function(){return"true"===(0,r.K)().embed}},32712:function(n,e,t){"use strict";var r=t(2784),i=t(97184);e.Z=function(){return(0,r.useContext)(i.ZP)}},66610:function(n,e,t){"use strict";t.d(e,{V:function(){return o},Y:function(){return u}});var r=t(21746),i=t(57899),o=function(){return(0,r.Sz)(i.Z,(function(n){return n}))},u=function(){return(0,r.Sz)(i.Z,(function(n){return(null===n||void 0===n?void 0:n.getArray("skip_file_auth_team_ids"))||[]}))}},44540:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSP:function(){return q},createWorkspaceOg:function(){return J},default:function(){return K}});var r=t(52322),i=t(2784),o=t(5632),u=t.n(o),a=t(13032),s=t(69212),c=t(55632),d=t(52449),l=t(32140),f=t(94234),v=t(54599),p=t(32712),h=t(66610),_=t(14898),m=t(49797),g=t(41573),w=t(57120),x=t(68056),E=t(39449),I=t(3559),b=t(53822),k=t(50639),A=t(5233),S=t(41302),Z=t.n(S),U=function(n){var e=n.ownerId,t=(0,m.Z)(null!==e&&void 0!==e?e:"");return t?(0,r.jsxs)("p",{children:["Create a free account to collaborate with ",t.displayName,". By signing up, you agree to our ",(0,r.jsx)("a",{href:"".concat(c.CF.url,"/terms"),children:"terms of service"})]}):null};function T(){var n=new URLSearchParams(window.location.search);return n.set(l.eX,"true"),"".concat(window.location.pathname,"?").concat(n.toString())}var C=function(){var n,e,t=(0,f.s)(),o=(0,k.d)(),a=(0,_.fC)(),s=(0,_.TF)(a),c=(0,h.Y)(),l=(0,g.bm)(),m=l.teamInfo,S=l.workspace,C="integration"===l.environment,j=(0,d.fu)((null===(n=l.workspace)||void 0===n?void 0:n.id)||"",null===a||void 0===a?void 0:a.id),R=(0,p.Z)().setOffsetTop,N=(0,i.useState)(s&&!t&&!o),M=N[0],y=N[1],P=(0,v.ZP)(),O=(null===m||void 0===m?void 0:m.id)&&(c.includes(m.id)||(null===S||void 0===S?void 0:S.isAnonymousAccessAllowed)||(null===S||void 0===S?void 0:S.directAccessMode)===A.lL.Read),L=m&&!O&&!C&&M;(0,i.useEffect)((function(){R(M?40:0)}),[M,R]),(0,i.useEffect)((function(){var n;L&&s&&(w.Z.trackEvent(null,"page_view",{page_title:"Sign Up",page_location:"".concat(document.location.origin,"/auth/sign-up"),page_path:"/auth/sign-up",embedded_at_path:u().asPath}),P.openSignUpModal({isClosable:!1,customSubTitle:(0,r.jsx)(U,{ownerId:null===(n=l.workspace)||void 0===n?void 0:n.ownerId}),profileArgs:{signUpOrigin:"workspace"},onSignIn:function(n){var e;u().replace(T()),y(!1),P.closeAuthModal(),(null===m||void 0===m?void 0:m.isAutoJoinEnabled)&&(null===n||void 0===n?void 0:n.user)&&(null===(e=n.additionalUserInfo)||void 0===e?void 0:e.isNewUser)&&(0,x.Z)(m.id,null===n||void 0===n?void 0:n.user.uid,{isAutoJoin:!0,origin:"workspace"}).catch((function(){}))}}))}),[L,P.openSignUpModal,P.closeAuthModal,s,m,null===(e=l.workspace)||void 0===e?void 0:e.ownerId]);var F=(0,i.useCallback)((function(){w.Z.trackEvent("auth_banner","sign_up_click",{teamId:null===m||void 0===m?void 0:m.id,teamDomain:null===m||void 0===m?void 0:m.domain,teamAutoJoinEnabled:null===m||void 0===m?void 0:m.isAutoJoinEnabled,activeCollaborarCount:j.length}),w.Z.trackEvent(null,"page_view",{page_title:"Sign Up",page_location:"".concat(document.location.origin,"/auth/sign-up"),page_path:"/auth/sign-up",embedded_at_path:u().asPath}),P.openSignUpModal({isClosable:!0,profileArgs:{signUpOrigin:C?"integration":"workspace"},onSignIn:function(){u().replace(T()),y(!1)}})}),[m,P.openSignUpModal,j,C]);return!M||L?null:(0,r.jsx)("div",{className:Z().header,children:(0,r.jsxs)("div",{className:Z().wrapper,"data-testid":"auth-banner",children:[(0,r.jsx)("div",{className:Z().text,children:"Create multiple files and share everything with your team."}),(0,r.jsx)(I.ZP,{className:Z().signIn,onClick:F,children:"Sign Up Free"}),(0,r.jsx)("div",{className:Z().close,children:(0,r.jsx)(b.J,{icon:E.Z,onClick:function(){return y(!1)}})})]})})},j=t(43258),R=t(30096),N=t(26138),M=t(29639),y=t(90927),P=t(77084),O=t(97184),L=t(77324),F=t(98523),D=t(68732),G=t(19605),B=t(36171),X=function(n){var e=n.workspaceId,t=(0,G.K)(),r=(0,D.LP)(),o=(0,i.useState)(!1),u=o[0],a=o[1],s=(0,B.X)().request;return(0,i.useEffect)((function(){"duplicate"===t.action&&e&&"string"===typeof e&&r&&!u&&(a(!0),s({workspaceId:e,teamId:r},{reload:!0}))}),[r,s,u,t.action,e]),null},H=t(84622),q=!0,J=function(n,e,t){n=n||"Untitled File";var r=t.split("?");return t="".concat(r[0],"/preview").concat(2===r.length?"?":"").concat(r[1]||""),{title:n,description:e||"Create diagrams, wireframes, technical specs with your team. Your all-in-one technical ideation tool.",images:[{url:"".concat(c.l2.url).concat(t),width:1200,height:630,alt:n}]}},K=function(){var n=(0,o.useRouter)(),e=n.query.workspaceId;return(0,R.Z)(),X({workspaceId:e}),n.isReady?"string"!==typeof e?(0,r.jsx)(s.Z,{statusCode:404,title:"File not found"}):(0,r.jsxs)("div",{className:"workspace",children:[(0,r.jsx)(a.Z,{hideSplashOnLoad:!1,children:(0,r.jsx)(L.X,{workspaceId:e,children:(0,r.jsx)(F.Z,{children:(0,r.jsx)(H.P,{children:(0,r.jsxs)(M.Z,{children:[(0,r.jsx)(y.Z,{}),(0,r.jsx)(P.Z,{}),(0,r.jsxs)(O.Sh,{children:[(0,r.jsx)(C,{}),(0,r.jsx)(j.Z,{})]})]})})})})}),(0,r.jsx)(N.Z,{})]}):null}},98523:function(n,e,t){"use strict";t.d(e,{K:function(){return m}});var r=t(94776),i=t.n(r),o=t(52322),u=t(2784),a=t(21746),s=t(68732),c=t(97879),d=t(46908),l=t(24067),f=t(76687);function v(n,e,t,r,i,o,u){try{var a=n[o](u),s=a.value}catch(c){return void t(c)}a.done?e(s):Promise.resolve(s).then(r,i)}function p(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function u(n){v(o,r,i,u,a,"next",n)}function a(n){v(o,r,i,u,a,"throw",n)}u(void 0)}))}}var h={icons:[],isLoaded:!1},_=(0,a.kr)(h),m=function(){return(0,a.qp)(_)};e.Z=function(n){var e=n.children,t=(0,f.Pe)(),r=(0,s.LP)(),a=(0,u.useState)(h.icons),v=a[0],m=a[1],g=(0,u.useState)(h.isLoaded),w=g[0],x=g[1],E=t.appSettings.customIcons.isEnabled,I=(0,l.Su)().customIconsService,b=(0,u.useRef)(new Set);return(0,u.useEffect)((function(){if(E&&r)return I.subscribeByTeamId(r,function(){var n=p(i().mark((function n(e){var t,r,o,u,a,s,l;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(!w&&e&&x(!0),t=[],r=!0,o=!1,u=void 0,n.prev=3,a=function(n,e){var r=e.value,o=void 0;if(b.current.has(r.label))return"continue";var u=new Promise(function(){var n=p(i().mark((function n(e,t){var u;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(b.current.add(r.label),!c.LD.has(r.label)){n.next=5;break}o=c.LD.get(r.label),n.next=12;break;case 5:return n.next=7,fetch(r.url);case 7:return u=n.sent,n.next=10,u.text();case 10:o=n.sent,c.LD.set(r.label,o);case 12:if(o){n.next=15;break}return t(),n.abrupt("return");case 15:return n.next=17,(0,d.w)(o);case 17:e(o),b.current.delete(r.label);case 19:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}());t.push(u)},s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0)a(0,l);n.next=12;break;case 8:n.prev=8,n.t0=n.catch(3),o=!0,u=n.t0;case 12:n.prev=12,n.prev=13,r||null==s.return||s.return();case 15:if(n.prev=15,!o){n.next=18;break}throw u;case 18:return n.finish(15);case 19:return n.finish(12);case 20:Promise.allSettled(t),m(e);case 22:case"end":return n.stop()}}),n,null,[[3,8,12,20],[13,,15,19]])})));return function(e){return n.apply(this,arguments)}}())}),[E,w,r,I]),(0,o.jsx)(_.Provider,{value:{icons:v,isLoaded:w},children:e})}},72236:function(n,e,t){"use strict";var r;t.d(e,{X:function(){return r}}),function(n){n.DIAGRAM_GPT_TOUR="DIAGRAM_GPT_TOUR",n.PRODUCT_TOUR="PRODUCT_TOUR",n.INSERT_MENU_TUTORIAL="INSERT_MENU_TUTORIAL",n.MAKE_A_FIGURE_TUTORIAL="MAKE_A_FIGURE_TUTORIAL",n.EMBED_FIGURE_IN_DOCUMENT="EMBED_FIGURE_IN_DOCUMENT",n.LEAVE_COMMENT="LEAVE_COMMENT",n.ORGANIZE_WITH_FIGURES="ORGANIZE_WITH_FIGURES"}(r||(r={}))},97879:function(n,e,t){"use strict";t.d(e,{LD:function(){return r},dq:function(){return i}});var r=new Map,i=function(n){return r.get(n)}},46908:function(n,e,t){"use strict";t.d(e,{U:function(){return u},w:function(){return a}});var r=t(94776),i=t.n(r);function o(n,e,t,r,i,o,u){try{var a=n[o](u),s=a.value}catch(c){return void t(c)}a.done?e(s):Promise.resolve(s).then(r,i)}var u=new Map,a=function(){var n,e=(n=i().mark((function n(e){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",null);case 2:if(!u.has(e)){n.next=4;break}return n.abrupt("return",u.get(e));case 4:if((t=new Image).src="data:image/svg+xml;utf8,"+encodeURIComponent(e),"function"!==typeof t.decode){n.next=9;break}return n.next=9,t.decode();case 9:return u.set(e,t),n.abrupt("return",t);case 11:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,i){var u=n.apply(e,t);function a(n){o(u,r,i,a,s,"next",n)}function s(n){o(u,r,i,a,s,"throw",n)}a(void 0)}))});return function(n){return e.apply(this,arguments)}}()},41302:function(n){n.exports={header:"AuthBanner_header__hgvMD",wrapper:"AuthBanner_wrapper__Cznaq",text:"AuthBanner_text__SBtet",signIn:"AuthBanner_signIn__ugcMl",close:"AuthBanner_close__FmqGy"}}},function(n){var e=function(e){return n(n.s=e)};n.O(0,[2491,9774,2888,179],(function(){return e(412),e(5087)}));var t=n.O();_N_E=t}]);